!function(a,b){b.raadb=a;var c,d,e,f,g,h,i=require("../settings"),j=require("jaraw"),k=require("molten-core");c=new j({type:"script",login:{username:i.username,password:i.password},oauth:{id:i.id,secret:i.secret},user_agent:i.userAgent,rate_limit:1e3}),d=function(a,b,d){var e,f;return k.isType("Function",b)&&(d=b,b={}),e=function(a){return k.map(function(a){return a.data},JSON.parse(a).data.children)},f=function(a,b,c){return d(a,b,e(c))},c.get(a,b,f)},e=function(a){return"/r/"+a+".json"},f=function(a,b,d){var e,f;return void 0===d&&(d=k.id),e="/api/comment",f={api_type:"json",thing_id:a.name,text:b},c.post(e,f,d)},g=function(a,b,d,e){var f,g;void 0===e&&(e=k.id),f="/api/submit",g={api_type:"json",kind:"self",resubmit:!0,sendreplies:!1,sr:a,text:d,then:"comments",title:b},c.post(f,g,e)},h=function(a,b,d){var e,f,g;e="/r/"+a+"/comments/"+b.id+".json",f={limit:500},g=function(a,b,c){return!a&&b&&200==b.statusCode&&c?(comments=k.map(function(a){return a.data},JSON.parse(c)[1].data.children),d(a,comments)):d(new Error("Could not contact reddit"))},c.get(e,f,g)},module.exports={jaraw:c,getListing:d,getDbEndpt:e,createComment:f,createSelfText:g,getCommentsFromPost:h}}({},function(){return this}());