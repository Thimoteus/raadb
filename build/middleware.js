!function(a,b){b.raadb=a;var c,d,e,f,g,h,i,j=require("../settings"),k=require("jaraw"),l=require("molten-core");c=new k({type:"script",login:{username:j.username,password:j.password},oauth:{id:j.id,secret:j.secret},user_agent:j.userAgent,rate_limit:1e3}),d=function(a,b,d){var e,f;return l.isType("Function",b)&&(d=b,b={}),e=function(a){return l.map(function(a){return a.data},JSON.parse(a).data.children)},f=function(a,b,c){return d(a,b,e(c))},c.get(a,b,f)},e=function(a){return"/r/"+a+"/new.json"},f=function(a,b,d){var e,f;return void 0===d&&(d=l.id),e="/api/comment",f={api_type:"json",thing_id:a.name,text:b},c.post(e,f,d)},g=function(a,b,d,e){var f,g;void 0===e&&(e=l.id),f="/api/submit",g={api_type:"json",kind:"self",resubmit:!0,sendreplies:!1,sr:a,text:d,then:"comments",title:b},c.post(f,g,e)},h=function(a,b,d){var e,f,g;e="/r/"+a+"/comments/"+b.id+".json",f={limit:500},g=function(a,b,c){return!a&&b&&200==b.statusCode&&c?(comments=l.map(function(a){return a.data},JSON.parse(c)[1].data.children),d(a,comments)):d(new Error("Could not contact reddit"))},c.get(e,f,g)},i=function(a){var b,d;b="/api/del",d={id:a.name},c.post(b,d)},module.exports={getListing:d,getDbEndpt:e,createComment:f,createSelfText:g,getCommentsFromPost:h,deleteThing:i}}({},function(){return this}());