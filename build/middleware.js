!function(a,b){b.raadb=a;var c,d,e,f,g,h,i,j,k=require("../settings"),l=require("jaraw"),m=require("molten-core");c=new l({type:"script",login:{username:k.username,password:k.password},oauth:{id:k.id,secret:k.secret},user_agent:k.userAgent,rate_limit:1e3}),d=function(a,b,d){var e,f;return m.isType("Function",b)&&(d=b,b={}),e=function(a){return m.map(function(a){return a.data},JSON.parse(a).data.children)},f=function(a,b,c){return d(a,b,e(c))},c.get(a,b,f)},e=function(a){return"/r/"+a+"/new.json"},f=function(a,b,d){var e,f;return void 0===d&&(d=m.id),e="/api/comment",f={api_type:"json",thing_id:a.name,text:b},c.post(e,f,d)},g=function(a,b,d,e){var f,g;void 0===e&&(e=m.id),f="/api/submit",g={api_type:"json",kind:"self",resubmit:!0,sendreplies:!1,sr:a,text:d,then:"comments",title:b},c.post(f,g,e)},h=function(a,b,d){var e,f,g;e="/r/"+a+"/comments/"+b.id+".json",f={limit:500},g=function(a,b,c){return!a&&b&&200==b.statusCode&&c?(comments=m.map(function(a){return a.data},JSON.parse(c)[1].data.children),d(a,comments)):d(new Error("Could not contact reddit"))},c.get(e,f,g)},i=function(a){var b,d;b="/api/del",d={id:a.name},c.post(b,d)},j=function(a,b){var d,e;d="/api/editusertext",e={api_type:"json",thing_id:a.name,text:b},c.post(d,e)},module.exports={getListing:d,getDbEndpt:e,createComment:f,createSelfText:g,getCommentsFromPost:h,deleteThing:i,editComment:j}}({},function(){return this}());