!function(a,b){b.raadb=a;var c=require("molten-core"),d=require("./middleware"),e=d.getDbEndpt,f=d.getListing,g=d.createComment,h=d.createSelfText,i=function(a){return console.log(a),a},j=function(){return Date.now().toString(36)},k=function(a,b,d){var g=e(a),h={limit:100},i=function(a,e,f){if(a||!e||200!=e.statusCode||!f)return d(new Error("Could not contact reddit"));var g=function(a){return c.includes(b,a.title)},h=c.filter(g,f);return d(a,h)};f(g,h,i)},l=function(a,b,c){var d=j();h(a,b,d,c)},m=function(a,b,c){var d=function(d,e){if(d)return c(d);var f=function(a,b,d){var e=JSON.parse(d).json.data;c(a,e)};0===e.length?l(a,b,f):c(d,e[0])};k(a,[b],d)},n=function(a,b,d,e){void 0===e&&(e=c.id),i("inserting new doc into "+b+":"),i(d);var f=function(a,b){if(a)return e(a);var f=j(),h=c.encode64(JSON.stringify(d)),i=c.unlines([f,h]);g(b,i),e(a,f)};m(a,b,f)},o=function(a){this.insert=c.curry(n)(a)};module.exports=o}({},function(){return this}());